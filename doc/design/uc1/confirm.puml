@startuml

hide footbox
autonumber "<b>##."

participant "s:Session" as S
participant "ar:ActiveReservationStorage" as AR
participant "r:Reservation" as R
participant "pr:PendingReservations" as PR

[-> S + : confirm(u_id, r_id)
    S -> AR + : authenticated_extract(u_id, r_id)
        AR -> R : expect u_id == user_id()
    S <-- AR - : Ok: r: Reservation
    S -> PR : push(r)
[<-- S - : Ok

@enduml