@startuml

hide footbox
autonumber "<b>##."

participant "s:Session" as S
participant "pr:PendingReservations" as PR
participant "p:Payment" as P <<Interface>>
participant "r:Reservation" as R
participant "us:UserStorage" as US

[-> S + : pay(u_id, r_id, p: Payment)
    S -> PR + : pay(u_id, r_id, p)
        PR -> R : authenticate(u_id)\n// See SD `confirm`
        PR -> P + : pay(&r)
            opt ["details up to implementation"]
                P --> R : do something
            end
        PR <-- P - : Ok
    S <-- PR - : r: Reservation

    S -> US + : add_reservation(r)
    S <-- US - : Ok
[<-- S - : Ok


@enduml